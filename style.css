:root { --bg: #2d2d2d; --text: #eee; --board-border: #555; --light: #e0c090; --dark: #8a6040; --select: #7fc97f; --check: #ff5252; }
body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; background: var(--bg); color: var(--text); padding: 10px; margin: 0; }
@media (min-width: 768px) {
  body { flex-direction: row; flex-wrap: wrap; justify-content: center; align-items: flex-start; }
  .main-content { order: 1; }
  .side-panel { order: 2; margin-left: 20px; }
}
h1 { margin: 5px 0; }

/* Board */
.board-container { position: relative; margin: 10px 0; }
.board { display: grid; grid-template-columns: repeat(8, minmax(30px, min(8vw, 45px))); border: 3px solid var(--board-border); user-select: none; touch-action: manipulation; width: 100%; max-width: min(72vw, 360px); margin: 0 auto; }
.square { aspect-ratio: 1; display: flex; justify-content: center; align-items: center; font-size: clamp(20px, min(5vw, 32px), 32px); cursor: pointer; position: relative; }
.light { background: var(--light); color: black; } 
.dark { background: var(--dark); color: black; }

/* Piece States */
.selected { background: var(--select) !important; }
.check { background: var(--check) !important; }
.hint::after { content: ''; position: absolute; width: 20%; height: 20%; background: rgba(0,0,0,0.3); border-radius: 50%; }
.capture { background: #ff9800 !important; }
.capture::after { content: ''; position: absolute; inset: 0; border: 4px solid rgba(180, 0, 0, 0.6); border-radius: 50%; }
.ghost { opacity: 0.5; filter: grayscale(100%); }
.revealed { outline: 3px dashed #d00; outline-offset: -3px; background-color: rgba(255, 0, 0, 0.2); }

/* UI Elements */
.controls, .game-options, .timer-container { width: 100%; max-width: 400px; display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px; }
@media (min-width: 768px) {
  .controls, .game-options, .timer-container { max-width: 300px; }
}
.timer-container { flex-direction: row; justify-content: space-between; }

.timer { background: #333; border-radius: 8px; padding: 10px; text-align: center; flex: 1; border: 2px solid transparent; }
.timer.active { border-color: #4CAF50; }
.timer-time { font-size: 1.2em; font-weight: bold; font-family: monospace; }

.btn-row { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
button { padding: 8px 16px; background: #444; color: white; border: 1px solid #666; border-radius: 4px; cursor: pointer; font-size: 14px; }
button:hover { background: #555; }
button.primary { background: #4CAF50; border-color: #4CAF50; }
button.primary:hover { background: #45a049; }
button.secondary { background: #f44336; border-color: #d32f2f; }
button.small-btn { padding: 2px 8px; font-size: 12px; margin-left: 10px; }

.game-options { background: #333; padding: 10px; border-radius: 8px; }
.opt-row { display: flex; align-items: center; justify-content: space-between; margin: 5px 0; }
.opt-row.horizontal { flex-direction: row; justify-content: space-around; flex-wrap: wrap; }
.opt-item { display: flex; align-items: center; gap: 5px; min-width: 80px; }
.opt-item span { font-size: clamp(20px, min(5vw, 32px), 32px); }
.info-bubble { position: relative; display: inline-block; cursor: help; }
.info-bubble .tooltip { visibility: hidden; width: 220px; background: #555; color: #fff; text-align: left; border-radius: 6px; padding: 8px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -100px; opacity: 0; transition: opacity 0.3s; font-size: 11px; line-height: 1.3; }
.info-bubble:hover .tooltip { visibility: visible; opacity: 1; }

.network-controls { background: #444; padding: 10px; border-radius: 8px; margin-bottom: 10px; }
.connection-status { display: flex; flex-direction: column; align-items: center; gap: 5px; margin-top: 10px; padding: 8px; background: #333; border-radius: 4px; }
.room-code { font-family: monospace; font-weight: bold; color: #4CAF50; font-size: 14px; user-select: all; }
.connected { color: #4CAF50; }
.connecting { color: #ff9800; }
.disconnected { color: #f44336; }

#status { height: 20px; color: #ffeb3b; font-weight: bold; text-align: center; margin: 5px 0; }
#moveHistory { max-height: 100px; overflow-y: auto; background: #222; padding: 5px; font-family: monospace; font-size: 12px; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }

/* Modal */
.modal { position: absolute; inset: 0; background: rgba(0,0,0,0.85); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; }
.promo-opts button { font-size: 32px; width: 50px; height: 50px; margin: 5px; }
.dialog-content { background: #333; padding: 20px; border-radius: 8px; text-align: center; color: white; border: 1px solid #555; }
.dialog-content h3 { margin-top: 0; color: #ffeb3b; }

.hidden { display: none !important; }